<h1 class="text-2xl font-bold mb-6 text-center">Zarejestruj się</h1>
<form [formGroup]="registerForm" (ngSubmit)="register()" class="space-y-4 w-full max-w-md">
  <div class="space-y-2">
    <label for="username" class="block font-semibold">Nazwa</label>
    <input
      id="username"
      pInputText
      formControlName="username"
      class="w-full"
      [ngClass]="{
        'ng-invalid ng-dirty':
          registerForm.controls.username.invalid && registerForm.controls.username.touched
      }"
    />
    @if (registerForm.controls.username.hasError('required') &&
    registerForm.controls.username.touched) {
    <small class="block text-red-500">Nazwa jest wymagana.</small>
    }
  </div>

  <div class="space-y-2">
    <label for="password" class="block font-semibold">Hasło</label>
    <input
      id="password"
      type="password"
      pInputText
      formControlName="password"
      class="w-full"
      [ngClass]="{
        'ng-invalid ng-dirty':
          registerForm.controls.password.invalid && registerForm.controls.password.touched
      }"
    />
    @if (registerForm.controls.password.hasError('required') &&
    registerForm.controls.password.touched) {
    <small class="block text-red-500">Hasło jest wymagane.</small>
    } @if (registerForm.controls.password.hasError('minlength') &&
    registerForm.controls.password.touched) {
    <small class="block text-red-500">Hasło musi mieć co najmniej 6 znaków.</small>
    }
  </div>

  <div class="space-y-2">
    <label for="confirmPassword" class="block font-semibold">Potwierdź hasło</label>
    <input
      id="confirmPassword"
      type="password"
      pInputText
      formControlName="confirmPassword"
      class="w-full"
      [ngClass]="{
        'ng-invalid ng-dirty':
          registerForm.controls.confirmPassword.invalid &&
          registerForm.controls.confirmPassword.touched
      }"
    />
    @if (registerForm.controls.confirmPassword.hasError('required') &&
    registerForm.controls.confirmPassword.touched) {
    <small class="block text-red-500">Potwierdzenie hasła jest wymagane.</small>
    } @if (registerForm.controls.confirmPassword.hasError('minlength') &&
    registerForm.controls.confirmPassword.touched) {
    <small class="block text-red-500">Hasło musi mieć co najmniej 6 znaków.</small>
    } @if (registerForm.hasError('passwordMismatch') &&
    registerForm.controls.confirmPassword.touched) {
    <small class="block text-red-500">Hasła muszą się zgadzać.</small>
    }
  </div>

  <button
    pButton
    type="submit"
    label="Zarejestruj się"
    [loading]="isLoading()"
    class="w-full"
  ></button>
</form>

@if (errorMessage) {
<p-message styleClass="mt-4" severity="error" size="small">{{ errorMessage }}</p-message>
}

<p class="mt-4 text-center">
  Masz już konto?
  <a routerLink="/auth/login" class="text-blue-500 hover:underline cursor-pointer">Zaloguj się</a>
</p>
