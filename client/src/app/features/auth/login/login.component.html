<div class="max-w-md mx-auto mt-10 p-6 bg-white shadow-md rounded-lg">
  <h1 class="text-2xl font-bold mb-4">Zaloguj się</h1>

  @if (errorMessage) {
  <p-message styleClass="mb-4" severity="error">{{ errorMessage }}</p-message>
  }

  <form [formGroup]="loginForm" (ngSubmit)="login()">
    <div class="flex flex-col">
      <div class="flex-1">
        <label for="email" class="block font-semibold mb-2">E-mail</label>
        <input
          id="email"
          type="email"
          pInputText
          formControlName="email"
          placeholder="example@mail.com"
          class="w-full"
          [ngClass]="{
            'ng-invalid ng-dirty':
              loginForm.controls.email.invalid && loginForm.controls.email.touched
          }"
        />
        @if (loginForm.controls.email.hasError('required') && loginForm.controls.email.touched) {
        <small class="block text-red-500">E-mail jest wymagany.</small>
        } @if (loginForm.controls.email.hasError('email') && loginForm.controls.email.touched) {
        <small class="block text-red-500">Nieprawidłowy format e-maila.</small>
        }
      </div>

      <div class="flex-1">
        <label for="password" class="block font-semibold mb-2">Hasło</label>
        <p-password
          id="password"
          formControlName="password"
          [feedback]="false"
          [toggleMask]="true"
          class="w-full"
          [ngClass]="{
            'ng-invalid ng-dirty':
              loginForm.controls.password.invalid && loginForm.controls.password.touched
          }"
        />
        @if (loginForm.controls.password.hasError('required') &&
        loginForm.controls.password.touched) {
        <small class="block text-red-500">Hasło jest wymagane.</small>
        } @if (loginForm.controls.password.hasError('minlength') &&
        loginForm.controls.password.touched) {
        <small class="block text-red-500">Hasło musi mieć co najmniej 6 znaków.</small>
        }
      </div>

      <button
        pButton
        type="submit"
        label="Zaloguj się"
        [loading]="isLoading()"
        class="w-full"
      ></button>
    </div>
  </form>

  <p class="mt-4 text-center">
    Nie masz konta?
    <a routerLink="/register" class="text-blue-500 hover:underline">Zarejestruj się</a>
  </p>
</div>
